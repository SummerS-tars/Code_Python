# 地铁换乘路径规划系统 - 使用说明

## 项目简介

这是一个基于Python的地铁换乘路径智能规划系统，使用递归深度优先搜索（DFS）算法，为用户提供从起始站到目标站的换乘方案。

## 系统架构

```
src/
├── models/           # 数据模型层
│   ├── station.py    # 站点类
│   ├── line.py       # 线路类
│   └── network.py    # 地铁网络图
├── services/         # 业务逻辑层
│   ├── data_loader.py  # 数据加载器
│   └── path_finder.py  # 路径查找器
├── utils/            # 工具层
│   ├── parser.py     # 输入解析器
│   └── formatter.py  # 输出格式化器
├── config.py         # 配置文件
└── main.py           # 主程序入口
```

## 核心特性

✅ **递归DFS算法**：使用深度优先搜索算法查找路径  
✅ **换乘支持**：自动处理跨线路换乘  
✅ **多种运行模式**：交互式、命令行、测试模式  
✅ **完整类型注解**：遵循PEP 8规范  
✅ **模块化设计**：清晰的职责划分  

## 安装要求

- Python 3.11+
- 无需额外依赖（仅使用Python标准库）

## 使用方法

### 1. 交互式模式

```bash
cd src
python main.py
```

然后按提示输入查询：
```
请输入查询（或输入q退出）: 18号线，复旦大学-10号线，交通大学
```

### 2. 命令行模式

直接在命令行传入查询：

```bash
cd src
python main.py "18号线，复旦大学-10号线，交通大学"
```

### 3. 测试模式

运行预设的测试用例：

```bash
cd src
python main.py --test
```

## 输入格式

```
起始线路，起始站名-目标线路，目标站名
```

示例：
- `18号线，复旦大学-10号线，交通大学`
- `18号线，上海财经大学-8号线，东方体育中心`

## 输出格式

```
18号线，复旦大学
18号线，国权路
换乘
10号线，国权路
10号线，交通大学
```

## 测试结果

### 测试用例1：单次换乘
**输入**：`18号线，复旦大学-10号线，交通大学`

**输出**：
```
18号线，复旦大学
18号线，国权路
换乘
10号线，国权路
10号线，交通大学
```
✅ **通过**

### 测试用例2：多次换乘
**输入**：`18号线，上海财经大学-8号线，东方体育中心`

**输出**：
```
18号线，上海财经大学
18号线，复旦大学
18号线，国权路
换乘
10号线，国权路
10号线，交通大学
10号线，虹桥火车站
10号线，虹桥2号航站楼
换乘
2号线，虹桥2号航站楼
2号线，人民广场
换乘
8号线，人民广场
8号线，东方体育中心
```
✅ **通过**（注：DFS算法找到的是可达路径，不一定是最短路径）

## 数据文件

系统使用CSV格式的地铁线路数据：`doc/线路.csv`

**格式**：
```csv
站点ID,线路名,站名,可换乘站点ID
1,18号线,上海财经大学,
2,18号线,复旦大学,
3,18号线,国权路,5
```

## 异常处理

系统能够处理以下异常情况：
- ❌ 输入格式错误
- ❌ 站点或线路不存在
- ❌ 无可达路径
- ❌ 数据文件错误

## 技术特点

### 数据结构
- **双向链表**：表示同线路的前后站点关系
- **图结构**：表示整个地铁网络
- **多重索引**：ID、线路名、站名多维度查询

### 算法设计
- **递归DFS**：深度优先搜索路径
- **访问标记**：避免重复访问和死循环
- **回溯机制**：探索所有可能路径

### 代码规范
- ✅ PEP 8编码规范
- ✅ 完整的类型注解
- ✅ Google风格docstring
- ✅ 模块化设计

## 项目结构

完整的项目结构请参考：`doc/requirements.md`

## 开发者

本项目遵循专业的软件工程实践，包含完整的文档、清晰的架构设计和规范的编码风格。

## 许可证

本项目仅供学习使用。
